---
title: Course Schedule
directory: problems
tags:
  - topological-sort
date: 2022-10-29
---

- This is the canonical [[detect-a-cycle-in-directed-graph]] problem
- It can be solved using [[BFS]] with [[khans-algorithm]]
- Watch out for [topological-sort-edge-case](/posts/topological-sort-edge-case)

### Prerequisite

- [binary-tree-level-order-traversal](/posts/binary-tree-level-order-traversal)

### Solution

In the input we are giving some integer `n` and told this is how many courses we have (`n-1` to be accurate). So, if we are given `n=5` , then, as an example, our courses might be `[0,1,2,3,4]`.

The idea is that we can run a [[topological-sort]] algorithm on our input and _try_ to create a valid ordering of courses. Two things can happen:

1. We can have a valid ordering which will result in our ordering having the same length as the number of courses we are attempting to take. I will use an arbitrary example of `4->1->3->2->0`.
2. We CANNOT have a valid ordering which will result in a partial ordering of pre-requisite courses to take (this partial ordering is the part of the directed graph that does not contain a cycle. The `len(partial_ordering)` will not `==` `len(n-courses-we-need-to-take)`

Lets implement [[khans-algorithm]] for topological sorting.

### Code

```python
class Solution:
    def canFinish(self, numCourses, prerequisites):

        in_count = {}
        adj_list = {}

        for i in range(numCourses):
            in_count[i] = 0
            adj_list[i] = []

        for p in prerequisites:
            child, parent = p
            in_count[child] += 1
            adj_list[parent].append(child)

        q = collections.deque()
        for k, v in in_count.items():
            if v == 0:
                q.append(k)

        valid_schedule = []
        while q:

            parent = q.popleft()
            valid_schedule.append(parent)

            for child in adj_list[parent]:
                in_count[child] -= 1
                if in_count[child] == 0:
                    q.append(child)

        return len(valid_schedule) == numCourses
```
